<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body style="background-color: #5BB25A; position:relative;">
<div style="width: 100%;
height: 100vh;
position:absolute; display: flex; align-items: center; justify-content: center; color: white;
font-family: arial; font-weight: bold; font-size: 40px">MAVEN</div>
<div style="position: relative; min-height: 98vh;">
    <div id="i_frame_wrapper" style="height:500px; position: absolute; bottom: 0; right: 0;">
        <div id="collapse_button" style="position: absolute; right: 15px; top: 30px; z-index: 100; transform: rotate(-90deg); font-size: 16px; cursor: pointer"><</div>
        <iframe allow="microphone" style="border-radius: 8px; position: absolute; border: 1px solid lightgrey; right: 0; bottom: 0; " id="maven_iframe" width=400 height=500 src=https://maven.fluvius.co/iframe?30 > </iframe>
    </div>
</div>
<script>
  const collapse_button = document.getElementById('collapse_button')
  const i_frame = document.getElementById('maven_iframe')
  const i_frame_wrapper = document.getElementById('i_frame_wrapper')
  document.onmouseleave = (e)=>i_frame?.contentWindow.postMessage('hello', '*')
  collapse_button.addEventListener('click', ()=>{
    if(i_frame.height != 80){
      i_frame.height = 80
      i_frame_wrapper.style.height = '80px'
      collapse_button.style.transform = 'rotate(90deg)'
    }else{
      i_frame.height = 500
      i_frame_wrapper.style.height = '500px'
      collapse_button.style.transform = 'rotate(-90deg)' } })
  navigator.getUserMedia({audio:true,video:false}, function(stream) {
    stream.getTracks().forEach(x=>x.stop());
  }, err=>console.log(err));
</script>
</body>
</html>
